{"remainingRequest":"C:\\Users\\jespe\\Desktop\\ECutbildning\\Javascript 2\\Inlämningsuppgifter\\Webshop\\webshop\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jespe\\Desktop\\ECutbildning\\Javascript 2\\Inlämningsuppgifter\\Webshop\\webshop\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\jespe\\Desktop\\ECutbildning\\Javascript 2\\Inlämningsuppgifter\\Webshop\\webshop\\src\\store\\modules\\User.js","dependencies":[{"path":"C:\\Users\\jespe\\Desktop\\ECutbildning\\Javascript 2\\Inlämningsuppgifter\\Webshop\\webshop\\src\\store\\modules\\User.js","mtime":1617101399387},{"path":"C:\\Users\\jespe\\Desktop\\ECutbildning\\Javascript 2\\Inlämningsuppgifter\\Webshop\\webshop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jespe\\Desktop\\ECutbildning\\Javascript 2\\Inlämningsuppgifter\\Webshop\\webshop\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\jespe\\Desktop\\ECutbildning\\Javascript 2\\Inlämningsuppgifter\\Webshop\\webshop\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2plc3BlL0Rlc2t0b3AvRUN1dGJpbGRuaW5nL0phdmFzY3JpcHQgMi9JbmxceEU0bW5pbmdzdXBwZ2lmdGVyL1dlYnNob3Avd2Vic2hvcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICB1c2VyVG9rZW46IG51bGwsCiAgICBsb2dnZWRJbjogZmFsc2UKICB9LAogIGdldHRlcnM6IHsKICAgIGxvZ2dlZEluOiBmdW5jdGlvbiBsb2dnZWRJbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubG9nZ2VkSW47CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9VU0VSOiBmdW5jdGlvbiBTRVRfVVNFUihzdGF0ZSwgdG9rZW4pIHsKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgc3RhdGUudXNlclRva2VuID0gdG9rZW47CiAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLnVzZXJUb2tlbiA9IG51bGw7CiAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIENIRUNLX1VTRVI6IGZ1bmN0aW9uIENIRUNLX1VTRVIoc3RhdGUpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBzdGF0ZS51c2VyVG9rZW4gPSB0b2tlbjsKICAgICAgICAgIHN0YXRlLmxvZ2dlZEluID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUudXNlclRva2VuID0gbnVsbDsKICAgICAgICAgIHN0YXRlLmxvZ2dlZEluID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZ2lzdGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYsIF91c2VyKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIHVzZXIgPSB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBfdXNlci5lbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF91c2VyLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDo5OTk5L2FwaS91c2Vycy9yZWdpc3RlcicsIF91c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2xvZ2luJywgdXNlcik7IC8vIGNvbnNvbGUubG9nKGRpc3BhdGNoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX3JlZ2lzdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWdpc3RlcjsKICAgIH0oKSwKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmMiwgcGF5bG9hZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICBheGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0Ojk5OTkvYXBpL3VzZXJzL2xvZ2luJywgcGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzLmRhdGEudG9rZW4pOwogICAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrVXNlcjogZnVuY3Rpb24gY2hlY2tVc2VyKF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGNvbW1pdCgnQ0hFQ0tfVVNFUicpOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIG51bGwpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/jespe/Desktop/ECutbildning/Javascript 2/Inlämningsuppgifter/Webshop/webshop/src/store/modules/User.js"],"names":["axios","state","userToken","loggedIn","getters","mutations","SET_USER","token","CHECK_USER","localStorage","getItem","err","console","log","actions","register","_user","dispatch","user","email","password","post","login","payload","commit","then","res","status","setItem","data","checkUser","logout","removeItem"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\nexport default {\r\n    state: {\r\n        userToken: null,\r\n        loggedIn: false\r\n    },\r\n    getters: {\r\n        loggedIn: state => state.loggedIn\r\n    },\r\n    mutations: {\r\n        SET_USER: (state, token) => {\r\n            if(token) {\r\n                state.userToken = token\r\n                state.loggedIn = true\r\n            } else {\r\n                state.userToken = null\r\n                state.loggedIn = false\r\n            }\r\n            \r\n        },\r\n        CHECK_USER: state => {\r\n            try {\r\n                let token = localStorage.getItem('token')\r\n                if(token) {\r\n                    state.userToken = token\r\n                    state.loggedIn = true\r\n                } else {\r\n                    state.userToken = null\r\n                    state.loggedIn = false\r\n                }\r\n            }\r\n            catch(err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n    },\r\n    actions: {\r\n        register: async ({dispatch}, _user) => {\r\n            const user = {\r\n                email: _user.email,\r\n                password: _user.password\r\n            }\r\n            await axios.post('http://localhost:9999/api/users/register', _user)\r\n            dispatch('login', user)\r\n            // console.log(dispatch);\r\n        },\r\n        login: ({commit}, payload) => {\r\n            axios.post('http://localhost:9999/api/users/login', payload)\r\n            .then(res => {\r\n                if(res.status === 200) {\r\n                    localStorage.setItem('token', res.data.token)\r\n                    commit('SET_USER', res.data.token)\r\n                }\r\n            })\r\n        },\r\n        checkUser: ({commit}) => {\r\n            commit('CHECK_USER')\r\n        },\r\n        logout: ({commit}) => {\r\n            let token = localStorage.getItem('token')\r\n            if(token) {\r\n                localStorage.removeItem('token')\r\n                commit('SET_USER', null)\r\n                \r\n            }\r\n        }\r\n        \r\n    },\r\n}"]}]}